<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数组 | Garfield的个人空间</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Tech Otakus Save The World">
    <link rel="preload" href="/impact-md/assets/css/0.styles.8771a474.css" as="style"><link rel="preload" href="/impact-md/assets/js/app.333e85cf.js" as="script"><link rel="preload" href="/impact-md/assets/js/2.4ca87392.js" as="script"><link rel="preload" href="/impact-md/assets/js/3.9c028b60.js" as="script"><link rel="prefetch" href="/impact-md/assets/js/10.11cfc236.js"><link rel="prefetch" href="/impact-md/assets/js/11.ce076e96.js"><link rel="prefetch" href="/impact-md/assets/js/12.a68a0f78.js"><link rel="prefetch" href="/impact-md/assets/js/13.307fe2b9.js"><link rel="prefetch" href="/impact-md/assets/js/14.a073041c.js"><link rel="prefetch" href="/impact-md/assets/js/15.16f841f4.js"><link rel="prefetch" href="/impact-md/assets/js/16.676a6446.js"><link rel="prefetch" href="/impact-md/assets/js/17.fb1c2154.js"><link rel="prefetch" href="/impact-md/assets/js/18.e2ab6c9e.js"><link rel="prefetch" href="/impact-md/assets/js/19.29aebd20.js"><link rel="prefetch" href="/impact-md/assets/js/20.2b9f6e94.js"><link rel="prefetch" href="/impact-md/assets/js/21.affa1133.js"><link rel="prefetch" href="/impact-md/assets/js/22.e8e6b8d4.js"><link rel="prefetch" href="/impact-md/assets/js/4.9a5f88cc.js"><link rel="prefetch" href="/impact-md/assets/js/5.2634e616.js"><link rel="prefetch" href="/impact-md/assets/js/6.69ce2eec.js"><link rel="prefetch" href="/impact-md/assets/js/7.b99957ed.js"><link rel="prefetch" href="/impact-md/assets/js/8.b5419224.js"><link rel="prefetch" href="/impact-md/assets/js/9.b111e376.js">
    <link rel="stylesheet" href="/impact-md/assets/css/0.styles.8771a474.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/impact-md/" class="home-link router-link-active"><!----> <span class="site-name">Garfield的个人空间</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/impact-md/javascript/" class="nav-link">
  javascript
</a></div><div class="nav-item"><a href="/impact-md/css/" class="nav-link">
  css
</a></div><div class="nav-item"><a href="/impact-md/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/impact-md/other/" class="nav-link router-link-active">
  other
</a></div><div class="nav-item"><a href="/impact-md/tools/" class="nav-link">
  tools
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/impact-md/javascript/" class="nav-link">
  javascript
</a></div><div class="nav-item"><a href="/impact-md/css/" class="nav-link">
  css
</a></div><div class="nav-item"><a href="/impact-md/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/impact-md/other/" class="nav-link router-link-active">
  other
</a></div><div class="nav-item"><a href="/impact-md/tools/" class="nav-link">
  tools
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/impact-md/other/数据结构与算法概览.html" class="sidebar-link">数据结构与算法概览</a></li><li><a href="/impact-md/other/数组.html" class="active sidebar-link">数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/impact-md/other/数组.html#什么是数组" class="sidebar-link">什么是数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/impact-md/other/数组.html#线性表" class="sidebar-link">线性表</a></li><li class="sidebar-sub-header"><a href="/impact-md/other/数组.html#连续的内存空间和相同类型的数据" class="sidebar-link">连续的内存空间和相同类型的数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/impact-md/other/数组.html#随机访问" class="sidebar-link">随机访问</a></li><li class="sidebar-sub-header"><a href="/impact-md/other/数组.html#数组的插入和删除操作" class="sidebar-link">数组的插入和删除操作</a></li><li class="sidebar-sub-header"><a href="/impact-md/other/数组.html#数组操作常用方法" class="sidebar-link">数组操作常用方法</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h1> <blockquote><p>几乎所有的编程语言都原生支持数组类型，因为数组是最简单的内存数据结构</p></blockquote> <h2 id="什么是数组"><a href="#什么是数组" class="header-anchor">#</a> 什么是数组</h2> <p><strong>数组（Array）是一种线性表数据结构。它用一组连续的内存空间，来存储一组具有相同类型的数据。</strong></p> <p>这个定义有几个关键字我们分别来理解一下。</p> <h3 id="线性表"><a href="#线性表" class="header-anchor">#</a> 线性表</h3> <p><strong>线性表</strong>就是数据排成像一条线一样的结构。每个线性表上的数据最多只有前和后两个方向。其实除了数组，链表、队列、栈等也是线性表结构。</p> <p><img src="/impact-md/assets/img/data3.b6b71ec4.jpg" alt="data3"></p> <p><strong>非线性表</strong>，比如二叉树、堆、图等。之所以叫非线性，是因为，在非线性表中，数据之间并不是简单的前后关系。</p> <p><img src="/impact-md/assets/img/data4.6ebf4264.jpg" alt="data4"></p> <h3 id="连续的内存空间和相同类型的数据"><a href="#连续的内存空间和相同类型的数据" class="header-anchor">#</a> 连续的内存空间和相同类型的数据</h3> <p>正是因为这两个限制，数组才具有<strong>随机访问</strong>的特性。但有利就有弊，这两个限制也让数组的很多操作变得非常低效，比如要想在数组中<strong>删除、插入一个数据</strong>，为了保证连续性，就需要做大量的数据迁移。</p> <h2 id="随机访问"><a href="#随机访问" class="header-anchor">#</a> 随机访问</h2> <p>数组是如何实现根据下标随机访问数组元素。</p> <p>一个长度为 10 的 <code>int</code> 类型的数组 <code>int[] a = new int[10]</code>来举例。在这个图中，计算机给数组 <code>a[10]</code>，分配了一块连续内存空间 1000～1039，其中，内存块的首地址为 <code>base_address = 1000</code>。</p> <p><img src="/impact-md/assets/img/data5.98df8e70.jpg" alt="data5"></p> <p>计算机会给每个内存单元分配一个地址，计算机通过地址来访问内存中的数据。当计算机需要随机访问数组中的某个元素时，它会首先通过下面的寻址公式，计算出该元素存储的内存地址：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//其中 data_type_size 表示数组中每个元素的大小</span>
a<span class="token punctuation">[</span>i<span class="token punctuation">]</span>_address <span class="token operator">=</span> base_address <span class="token operator">+</span> i <span class="token operator">*</span> data_type_size 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>数组支持随机访问，根据下标随机访问的时间复杂度为 <code>O(1)</code>。</p> <h2 id="数组的插入和删除操作"><a href="#数组的插入和删除操作" class="header-anchor">#</a> 数组的插入和删除操作</h2> <h4 id="插入操作"><a href="#插入操作" class="header-anchor">#</a> 插入操作</h4> <p>假设数组的长度为 <code>n</code>，现在，如果我们需要将一个数据插入到数组中的第 <code>k</code> 个位置。为了把第 <code>k</code> 个位置腾出来，给新来的数据，
我们需要将第 <code>k～n</code> 这部分的元素都顺序地往后挪一位。那插入操作的时间复杂度是多少呢？你可以自己先试着分析一下。</p> <p>如果在数组的末尾插入元素，那就不需要移动数据了，这时的时间复杂度为 <code>O(1)</code>。但如果在数组的开头插入元素，那所有的数据都需要依次往后移动一位，所以最坏时间复杂度是 <code>O(n)</code>。
因为我们在每个位置插入元素的概率是一样的，所以平均情况时间复杂度为 <code>(1+2+…n)/n=O(n)</code>。</p> <p>如果数组中的数据是有序的，我们在某个位置插入一个新的元素时，就必须按照刚才的方法搬移 <code>k</code> 之后的数据。但是，如果数组中存储的数据并没有任何规律，数组只是被当作一个存储数据的集合。
在这种情况下，如果要将某个数据插入到第 <code>k</code> 个位置，为了避免大规模的数据迁移，我们还有一个简单的办法就是，直接将第 <code>k</code> 位的数据迁移到数组元素的最后，把新的元素直接放入第 <code>k</code> 个位置。</p> <p>为了更好地理解，我们举一个例子。假设数组 <code>a[10]</code>中存储了如下 5 个元素：<code>a，b，c，d，e</code>。</p> <p>我们现在需要将元素 <code>x</code> 插入到第 3 个位置。我们只需要将 <code>c</code> 放入到 <code>a[5]</code>，将 <code>a[2]</code>赋值为 <code>x</code> 即可。最后，数组中的元素如下： <code>a，b，x，d，e，c</code>。</p> <p><img src="/impact-md/assets/img/data6.3f70b4ad.jpg" alt="data6"></p> <p>利用这种处理技巧，在特定场景下，在第 <code>k</code> 个位置插入一个元素的时间复杂度就会降为 <code>O(1)</code>。</p> <h4 id="删除操作"><a href="#删除操作" class="header-anchor">#</a> 删除操作</h4> <p>跟插入数据类似，如果我们要删除第 <code>k</code> 个位置的数据，为了内存的连续性，也需要搬移数据，不然中间就会出现空洞，内存就不连续了。和插入类似，如果删除数组末尾的数据，则最好情况时间复杂度为 <code>O(1)</code>；
如果删除开头的数据，则最坏情况时间复杂度为 <code>O(n)</code>；平均情况时间复杂度也为<code>O(n)</code>。
实际上，在某些特殊场景下，我们并不一定非得追求数组中数据的连续性。如果我们将多次删除操作集中在一起执行，删除的效率是不是会提高很多呢？我们继续来看例子。
数组 <code>a[10]</code>中存储了 8 个元素：<code>a，b，c，d，e，f，g，h</code>。现在，我们要依次删除 <code>a，b，c</code> 三个元素。</p> <p><img src="/impact-md/assets/img/data7.b69b8c5d.jpg" alt="data7"></p> <p>为了避免 <code>d，e，f，g，h</code> 这几个数据会被搬移三次，我们可以先记录下已经删除的数据。
每次的删除操作并不是真正地迁移数据，只是记录数据已经被删除。
当数组没有更多空间存储数据时，我们再触发执行一次真正的删除操作，这样就大大减少了删除操作导致的数据迁移。</p> <h2 id="数组操作常用方法"><a href="#数组操作常用方法" class="header-anchor">#</a> 数组操作常用方法</h2> <table><thead><tr><th>操作</th> <th style="text-align:center;">方法</th></tr></thead> <tbody><tr><td>尾部插入元素</td> <td style="text-align:center;">push</td></tr> <tr><td>头部插入元素</td> <td style="text-align:center;">unshift</td></tr> <tr><td>尾部删除元素</td> <td style="text-align:center;">pop</td></tr> <tr><td>头部删除元素</td> <td style="text-align:center;">shift</td></tr> <tr><td>在任意位置添加或删除元素</td> <td style="text-align:center;">splice</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020-05-18 15:11:33</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/impact-md/other/数据结构与算法概览.html" class="prev">
        数据结构与算法概览
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/impact-md/assets/js/app.333e85cf.js" defer></script><script src="/impact-md/assets/js/2.4ca87392.js" defer></script><script src="/impact-md/assets/js/3.9c028b60.js" defer></script>
  </body>
</html>
